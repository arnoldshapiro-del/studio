{
  "entities": {
    "UserProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UserProfile",
      "type": "object",
      "description": "Represents a user's profile in the WellTrack Daily application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user profile."
        },
        "email": {
          "type": "string",
          "description": "User's email address.",
          "format": "email"
        },
        "name": {
          "type": "string",
          "description": "User's full name."
        }
      },
      "required": [
        "id",
        "email",
        "name"
      ]
    },
    "MedicationLog": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "MedicationLog",
      "type": "object",
      "description": "Records when a user takes their medication.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the medication log entry."
        },
        "userProfileId": {
          "type": "string",
          "description": "Reference to UserProfile. (Relationship: UserProfile 1:N MedicationLog)"
        },
        "timeTaken": {
          "type": "string",
          "description": "Timestamp indicating when the medication was taken.",
          "format": "date-time"
        },
        "medicationType": {
          "type": "string",
          "description": "Specifies whether the medication was for morning or evening."
        }
      },
      "required": [
        "id",
        "userProfileId",
        "timeTaken",
        "medicationType"
      ]
    },
    "InjectionLog": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "InjectionLog",
      "type": "object",
      "description": "Records when a user takes their injection.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the injection log entry."
        },
        "userProfileId": {
          "type": "string",
          "description": "Reference to UserProfile. (Relationship: UserProfile 1:N InjectionLog)"
        },
        "timeTaken": {
          "type": "string",
          "description": "Timestamp indicating when the injection was taken.",
          "format": "date-time"
        },
        "scheduledDate": {
          "type": "string",
          "description": "The date the injection was scheduled to be taken.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "userProfileId",
        "timeTaken",
        "scheduledDate"
      ]
    },
    "WaterIntakeLog": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "WaterIntakeLog",
      "type": "object",
      "description": "Records a user's water intake.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the water intake log entry."
        },
        "userProfileId": {
          "type": "string",
          "description": "Reference to UserProfile. (Relationship: UserProfile 1:N WaterIntakeLog)"
        },
        "timeTaken": {
          "type": "string",
          "description": "Timestamp indicating when the water was consumed.",
          "format": "date-time"
        },
        "intakeTimeOfDay": {
          "type": "string",
          "description": "Specifies whether the water was consumed in the morning, afternoon, or evening."
        }
      },
      "required": [
        "id",
        "userProfileId",
        "timeTaken",
        "intakeTimeOfDay"
      ]
    },
    "TreadmillWorkoutLog": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "TreadmillWorkoutLog",
      "type": "object",
      "description": "Records a user's treadmill workouts.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the treadmill workout log entry."
        },
        "userProfileId": {
          "type": "string",
          "description": "Reference to UserProfile. (Relationship: UserProfile 1:N TreadmillWorkoutLog)"
        },
        "startTime": {
          "type": "string",
          "description": "Timestamp indicating when the workout started.",
          "format": "date-time"
        },
        "durationMinutes": {
          "type": "number",
          "description": "Duration of the workout in minutes."
        },
        "speedMph": {
          "type": "number",
          "description": "Speed of the treadmill during the workout in miles per hour."
        }
      },
      "required": [
        "id",
        "userProfileId",
        "startTime",
        "durationMinutes",
        "speedMph"
      ]
    },
    "ResistanceTrainingLog": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "ResistanceTrainingLog",
      "type": "object",
      "description": "Records a user's resistance training sessions.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the resistance training log entry."
        },
        "userProfileId": {
          "type": "string",
          "description": "Reference to UserProfile. (Relationship: UserProfile 1:N ResistanceTrainingLog)"
        },
        "startTime": {
          "type": "string",
          "description": "Timestamp indicating when the training session started.",
          "format": "date-time"
        },
        "durationMinutes": {
          "type": "number",
          "description": "Duration of the training session in minutes."
        }
      },
      "required": [
        "id",
        "userProfileId",
        "startTime",
        "durationMinutes"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}/userProfile",
        "definition": {
          "entityName": "UserProfile",
          "schema": {
            "$ref": "#/backend/entities/UserProfile"
          },
          "description": "Stores user profile information. Path-based ownership ensures only the authenticated user can access their profile.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier of the user."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/medicationLogs/{medicationLogId}",
        "definition": {
          "entityName": "MedicationLog",
          "schema": {
            "$ref": "#/backend/entities/MedicationLog"
          },
          "description": "Stores medication log entries for a specific user. Path-based ownership ensures only the authenticated user can access their medication logs.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier of the user."
            },
            {
              "name": "medicationLogId",
              "description": "The unique identifier of the medication log entry."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/injectionLogs/{injectionLogId}",
        "definition": {
          "entityName": "InjectionLog",
          "schema": {
            "$ref": "#/backend/entities/InjectionLog"
          },
          "description": "Stores injection log entries for a specific user. Path-based ownership ensures only the authenticated user can access their injection logs.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier of the user."
            },
            {
              "name": "injectionLogId",
              "description": "The unique identifier of the injection log entry."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/waterIntakeLogs/{waterIntakeLogId}",
        "definition": {
          "entityName": "WaterIntakeLog",
          "schema": {
            "$ref": "#/backend/entities/WaterIntakeLog"
          },
          "description": "Stores water intake log entries for a specific user. Path-based ownership ensures only the authenticated user can access their water intake logs.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier of the user."
            },
            {
              "name": "waterIntakeLogId",
              "description": "The unique identifier of the water intake log entry."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/treadmillWorkoutLogs/{treadmillWorkoutLogId}",
        "definition": {
          "entityName": "TreadmillWorkoutLog",
          "schema": {
            "$ref": "#/backend/entities/TreadmillWorkoutLog"
          },
          "description": "Stores treadmill workout log entries for a specific user. Path-based ownership ensures only the authenticated user can access their treadmill workout logs.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier of the user."
            },
            {
              "name": "treadmillWorkoutLogId",
              "description": "The unique identifier of the treadmill workout log entry."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/resistanceTrainingLogs/{resistanceTrainingLogId}",
        "definition": {
          "entityName": "ResistanceTrainingLog",
          "schema": {
            "$ref": "#/backend/entities/ResistanceTrainingLog"
          },
          "description": "Stores resistance training log entries for a specific user. Path-based ownership ensures only the authenticated user can access their resistance training logs.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier of the user."
            },
            {
              "name": "resistanceTrainingLogId",
              "description": "The unique identifier of the resistance training log entry."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed to ensure data security, scalability, and maintainability, following the principles of Authorization Independence, Clarity of Intent, and DBAC. User-specific data is stored under `/users/{userId}`, ensuring that only the authenticated user can access their data. Each subcollection under the user's document (e.g., `/users/{userId}/medicationLogs`, `/users/{userId}/injectionLogs`, `/users/{userId}/waterIntakeLogs`, `/users/{userId}/treadmillWorkoutLogs`, `/users/{userId}/resistanceTrainingLogs`) stores records related to medication, injections, water intake, treadmill workouts, and resistance training respectively. This structure enables straightforward security rules based on path-based ownership, eliminating the need for complex `get()` calls, and supporting atomic operations. Data segregation ensures that each collection has a homogeneous security posture."
  }
}