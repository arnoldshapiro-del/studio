
{
  "entities": {
    "AllData": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "AllData",
      "type": "object",
      "description": "A single document containing all of the user's tracking data.",
      "properties": {
        "medication": { "$ref": "#/backend/entities/MedicationState" },
        "water": { "$ref": "#/backend/entities/WaterState" },
        "injection": { "$ref": "#/backend/entities/InjectionState" },
        "workout": { "$ref": "#/backend/entities/WorkoutState" },
        "mood": { "$ref": "#/backend/entities/MoodState" }
      }
    },
    "DatedEntry": {
      "title": "Dated Entry",
      "type": "object",
      "properties": {
        "date": { "type": "string", "format": "date-time" }
      },
      "required": ["date"]
    },
    "MedicationState": {
      "title": "MedicationState",
      "type": "object",
      "properties": {
        "morning": { "type": "object", "properties": { "time": { "type": "string", "format": "time" } } },
        "evening": { "type": "object", "properties": { "time": { "type": "string", "format": "time" } } },
        "history": {
          "type": "array",
          "items": {
            "allOf": [
              { "$ref": "#/backend/entities/DatedEntry" },
              {
                "type": "object",
                "properties": {
                  "period": { "type": "string", "enum": ["morning", "evening"] }
                }
              }
            ]
          }
        }
      }
    },
    "WaterState": {
      "title": "WaterState",
      "type": "object",
      "properties": {
        "history": {
          "type": "array",
          "items": {
            "allOf": [
              { "$ref": "#/backend/entities/DatedEntry" },
              {
                "type": "object",
                "properties": {
                  "period": { "type": "string", "enum": ["morning", "afternoon", "evening"] }
                }
              }
            ]
          }
        }
      }
    },
    "InjectionState": {
      "title": "InjectionState",
      "type": "object",
      "properties": {
        "startDate": { "type": "string", "format": "date-time" },
        "frequency": { "type": "number" },
        "history": { "type": "array", "items": { "type": "string", "format": "date-time" } }
      }
    },
    "WorkoutState": {
      "title": "WorkoutState",
      "type": "object",
      "properties": {
        "treadmill": {
          "type": "object",
          "properties": { "goal": { "type": "number" } }
        },
        "resistance": {
          "type": "object",
          "properties": { "goal": { "type": "number" } }
        },
        "history": {
          "type": "array",
          "items": {
            "allOf": [
              { "$ref": "#/backend/entities/DatedEntry" },
              {
                "type": "object",
                "properties": {
                  "type": { "type": "string", "enum": ["treadmill", "resistance"] }
                }
              }
            ]
          }
        }
      }
    },
    "MoodState": {
      "title": "MoodState",
      "type": "object",
      "properties": {
        "history": {
          "type": "array",
          "items": { "$ref": "#/backend/entities/MoodEntry" }
        }
      }
    },
    "MoodEntry": {
      "title": "MoodEntry",
      "type": "object",
      "allOf": [{ "$ref": "#/backend/entities/DatedEntry" }],
      "properties": {
        "mood": {
          "type": "string",
          "enum": ["great", "good", "neutral", "bad", "awful"],
          "description": "User's self-reported mood rating."
        },
        "notes": {
          "type": "string",
          "description": "Optional notes from the user about their mood."
        }
      },
      "required": ["mood"]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "/users/{userId}/data/{docId}": {
      "schema": "AllData",
      "description": "Stores all user tracking data in a single document for efficient retrieval."
    }
  }
}

    