{
  "entities": {
    "AllData": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "AllData",
      "type": "object",
      "description": "A single document containing all of the user's tracking data.",
      "properties": {
        "medication": { "$ref": "#/backend/entities/MedicationState" },
        "water": { "$ref": "#/backend/entities/WaterState" },
        "injection": { "$ref": "#/backend/entities/InjectionState" },
        "workout": { "$ref": "#/backend/entities/WorkoutState" }
      }
    },
    "MedicationState": {
      "title": "MedicationState",
      "type": "object",
      "properties": {
        "morning": { "$ref": "#/backend/entities/TimeOfDay" },
        "evening": { "$ref": "#/backend/entities/TimeOfDay" }
      }
    },
    "TimeOfDay": {
      "title": "TimeOfDay",
      "type": "object",
      "properties": {
        "taken": { "type": "boolean" },
        "time": { "type": "string", "format": "time" }
      }
    },
    "WaterState": {
      "title": "WaterState",
      "type": "object",
      "properties": {
        "morning": { "type": "boolean" },
        "afternoon": { "type": "boolean" },
        "evening": { "type": "boolean" }
      }
    },
    "InjectionState": {
      "title": "InjectionState",
      "type": "object",
      "properties": {
        "startDate": { "type": "string", "format": "date-time" },
        "frequency": { "type": "number" },
        "history": { "type": "array", "items": { "type": "string", "format": "date-time" } }
      }
    },
    "WorkoutState": {
      "title": "WorkoutState",
      "type": "object",
      "properties": {
        "treadmill": {
          "type": "object",
          "properties": {
            "sessionsThisWeek": { "type": "number" },
            "goal": { "type": "number" }
          }
        },
        "resistance": {
          "type": "object",
          "properties": {
            "sessionsThisWeek": { "type": "number" },
            "goal": { "type": "number" }
          }
        }
      }
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "/users/{userId}/data/{docId}": {
      "schema": "AllData",
      "description": "Stores all user tracking data in a single document for efficient retrieval."
    }
  }
}
